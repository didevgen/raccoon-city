(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[20],{1106:function(e,n,t){"use strict";t.r(n);var a=t(105),r=t.n(a),i=t(114),c=t(112),o=t(102),l=t(877),u=t(830),s=t(1091),d=t(859),m=t.n(d),p=t(870),f=t.n(p),b=t(0),v=t.n(b),E=t(117),g=t(42),O=t(33),j=t(60);function h(){var e=Object(O.a)(["\n    mutation deleteContact($uuid: String!) {\n        deleteContact(uuid: $uuid)\n    }\n"]);return h=function(){return e},e}function C(){var e=Object(O.a)(["\n    mutation updateContact($uuid: String!, $contact: ContactInput!) {\n        updateContact(uuid: $uuid, contact: $contact) {\n            id\n        }\n    }\n"]);return C=function(){return e},e}function y(){var e=Object(O.a)(["\n    mutation createContact($developerUuid: String!, $contact: ContactInput!) {\n        createContact(developerUuid: $developerUuid, contact: $contact) {\n            id\n        }\n    }\n"]);return y=function(){return e},e}var x=Object(j.a)(y()),k=Object(j.a)(C()),S=Object(j.a)(h()),w=t(850),P=t(353),U=t(394),$=t(1011),I=t(999),T=t(53),B=t(55),N=t(550),M=t.n(N),R=t(171),q=t(998),A=t(1107),W=t(1099),F=t(997),V=t(234),D=t(232),z=t(837),J=t(199),Q=t(838),_=t(880),G=t.n(_),H=t(960),K=t.n(H),L=t(881),X=t.n(L),Y=t(961),Z=t.n(Y),ee=t(879),ne=t(871),te=t.n(ne),ae=t(74),re=t(857),ie=t(124),ce=t(827),oe=t(351),le=t(856),ue=t(11),se=t(858),de=t.n(se);function me(){var e=Object(O.a)(["\n    margin-right: 8px;\n    white-space: nowrap;\n"]);return me=function(){return e},e}function pe(){var e=Object(O.a)(["\n    margin: 0 !important;\n"]);return pe=function(){return e},e}function fe(){var e=Object(O.a)(["\n    display: flex;\n    align-items: center;\n"]);return fe=function(){return e},e}var be=T.a.div(fe()),ve=Object(T.a)(V.a)(pe()),Ee=T.a.div(me());var ge=Object(ue.a)((function(e){return{disabled:{borderBottom:0,"&:before":{borderBottom:0}}}}))((function(e){var n=e.classes,t=(e.value,e.label),a=e.inputProps,r=(Object(oe.a)(e,["classes","value","label","inputProps"]),Object(b.useState)(!1)),i=Object(c.a)(r,2),o=i[0],l=i[1],s=Object(b.useRef)();return v.a.createElement(be,null,t&&v.a.createElement(Ee,null,t),v.a.createElement(ve,Object.assign({inputRef:s,name:"email",margin:"normal",fullWidth:!0,onChange:function(){},disabled:!o,onBlur:function(){l(!1)},InputProps:{classes:{disabled:n.disabled},endAdornment:v.a.createElement(le.a,{position:"end"},v.a.createElement(u.a,{className:"EditIcon",onClick:function(){l(!0),s.current&&setTimeout((function(){s.current.focus()}))}},v.a.createElement(de.a,null)))}},a)))})),Oe=t(391),je=t(959);function he(){var e=Object(O.a)(["\n    display: flex;\n    padding: 8px !important;\n    align-items: center;\n    margin-left: 8px;\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.08);\n        cursor: pointer;\n    }\n"]);return he=function(){return e},e}function Ce(){var e=Object(O.a)(["\n    padding: 16px;\n"]);return Ce=function(){return e},e}function ye(){var e=Object(O.a)(["\n    &.MuiIconButton-root {\n        color: white !important;\n    }\n"]);return ye=function(){return e},e}function xe(){var e=Object(O.a)(["\n    display: flex;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n\n    .MuiInputBase-input,\n    .EditIcon {\n        font-size: 24px;\n        line-height: 24px;\n        color: #fff;\n    }\n"]);return xe=function(){return e},e}function ke(){var e=Object(O.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return ke=function(){return e},e}function Se(){var e=Object(O.a)(["\n    box-shadow: none;\n    background-color: #37485c !important;\n    .MuiButtonBase--root {\n        color: #fff !important;\n    }\n    .MuiTab-textColorPrimary {\n        color: #fff !important;\n    }\n    .MuiTabs-indicator {\n        background-color: #fff !important;\n    }\n    margin-top: auto;\n"]);return Se=function(){return e},e}function we(){var e=Object(O.a)(["\n    height: 30%;\n    max-height: 240px;\n    background-color: #37485c;\n    color: #fff;\n    display: flex;\n    flex-direction: column;\n"]);return we=function(){return e},e}function Pe(){var e=Object(O.a)(["\n    width: 40%;\n    background-color: #fff;\n    border-right: 3px solid #dbdbdb;\n"]);return Pe=function(){return e},e}var Ue=T.a.div(Pe()),$e=T.a.div(we()),Ie=Object(T.a)(R.a)(Se()),Te=T.a.div(ke()),Be=T.a.div(xe()),Ne=Object(T.a)(u.a)(ye()),Me=T.a.div(Ce()),Re=Object(T.a)(J.a)(he());function qe(e){return e.data.name}function Ae(e){var n,t=e.innerProps,a=e.data,r=e.innerRef;return v.a.createElement(Re,Object.assign({ref:r},t,{onClick:function(){e.selectOption(a)}}),v.a.createElement(q.a,{alignItems:"flex-start"},v.a.createElement(Q.a,{primary:a.name}),v.a.createElement(Q.a,{primary:null===a||void 0===a||null===(n=a.role)||void 0===n?void 0:n.displayName})),v.a.createElement(z.a,{variant:"inset",component:"li"}))}function We(e){var n=e.onClose,t=e.contact,a=Object(g.g)().developerUuid,l=v.a.useState(0),s=Object(c.a)(l,2),d=s[0],m=s[1],p=Object(o.b)(ce.b),f=p.data,b=p.loading,E=p.error,O=Object(o.b)(w.c),j=O.data,h=O.loading,C=Object(o.a)(t?k:x),y=Object(c.a)(C,1)[0];if(b||E||h)return null;var S=t?Object(B.a)({},t,{clientStatus:j.clientStatuses.find((function(e){return e.key===t.clientStatus}))}):{phones:[""]},P=function(e,n){m(n)};return v.a.createElement(ae.b,{initialValues:S,mutators:Object(B.a)({},ee.a),subscription:{invalid:!0,values:!0},onSubmit:function(){}},(function(e){var c=e.values,o=e.invalid;return v.a.createElement(Ue,null,v.a.createElement($e,null,v.a.createElement(Te,null,v.a.createElement(Ne,{"aria-label":"upload picture",component:"span",onClick:function(){n()}},v.a.createElement(K.a,null)),v.a.createElement(Ne,{"aria-label":"upload picture",component:"span"},v.a.createElement(Z.a,null))),v.a.createElement(Be,null,v.a.createElement(ae.a,{name:"name",validate:ie.c,defaultValue:"\u0418\u043c\u044f \u0424\u0430\u043c\u0438\u043b\u0438\u044f"},(function(e){return v.a.createElement(ge,{inputProps:e.input})}))),v.a.createElement(Ie,null,v.a.createElement(A.a,{value:d,onChange:P,indicatorColor:"primary",textColor:"primary",centered:!0},v.a.createElement(W.a,{label:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435"}),v.a.createElement(W.a,{label:"\u0421\u0434\u0435\u043b\u043a\u0438"})))),v.a.createElement(Oe.a,{value:d,index:0},v.a.createElement(F.a,{container:!0,spacing:3},v.a.createElement(F.a,{item:!0,xs:12},v.a.createElement(ae.a,{name:"responsible",validate:ie.c},(function(e){return v.a.createElement(M.a,{id:"place",label:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 *",options:f.getUsers,value:e.input.value,onChange:function(n){e.input.onChange(n)},isClearable:!0,components:{Option:Ae,SingleValue:qe}})}))),v.a.createElement(F.a,{item:!0,xs:12},v.a.createElement(re.a,{name:"phones"},(function(e){var n=e.fields;return n.map((function(e,t){return v.a.createElement(F.a,{container:!0,key:e,spacing:3,justify:"center",alignItems:"center",alignContent:"center"},v.a.createElement(F.a,{item:!0,xs:9},v.a.createElement(ae.a,{name:e,validate:ie.c},(function(e){return v.a.createElement(te.a,{name:e.input.name,value:e.input.value,onChange:e.input.onChange,fullWidth:!0,preferredCountries:["ua"],regions:"europe",defaultCountry:"ua",label:"\u0420\u0430\u0431 \u0442\u0435\u043b\u0435\u0444\u043e\u043d (".concat(t+1,") *"),variant:"outlined"})}))),v.a.createElement(F.a,{item:!0,xs:3},v.a.createElement(u.a,{onClick:function(){n.push(void 0)},color:"primary","aria-label":"upload picture",component:"span"},v.a.createElement(G.a,null)),t>0&&v.a.createElement(u.a,{color:"secondary",onClick:function(){n.remove(t)},"aria-label":"upload picture",component:"span"},v.a.createElement(X.a,null))))}))}))),v.a.createElement(F.a,{item:!0,xs:12},v.a.createElement(ae.a,{name:"clientStatus"},(function(e){return v.a.createElement(M.a,{id:"place",label:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",options:j.clientStatuses,value:e.input.value,onChange:function(n){e.input.onChange(n)},isClearable:!0,components:{Option:je.a,SingleValue:je.b}})}))),v.a.createElement(F.a,{item:!0,xs:12},v.a.createElement(ae.a,{name:"position"},(function(e){return v.a.createElement(V.a,{name:e.input.name,value:e.input.value,onChange:e.input.onChange,fullWidth:!0,label:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",variant:"outlined"})}))),v.a.createElement(F.a,{item:!0,xs:12},v.a.createElement(ae.a,{name:"email"},(function(e){return v.a.createElement(V.a,{name:e.input.name,value:e.input.value,onChange:e.input.onChange,fullWidth:!0,label:"Email",variant:"outlined"})}))))),v.a.createElement(Oe.a,{value:d,index:1},"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"),v.a.createElement(Me,null,v.a.createElement(D.a,{onClick:n},"\u041e\u0442\u043c\u0435\u043d\u0430"),v.a.createElement(D.a,{disabled:o,onClick:Object(i.a)(r.a.mark((function e(){var i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={contact:Object(B.a)({},c,{clientStatus:null===(i=c.clientStatus)||void 0===i?void 0:i.key,responsible:c.responsible.id})},t?(o.uuid=t.id,delete o.contact.__typename):o.developerUuid=a,e.next=4,y({variables:o,refetchQueries:[{query:w.a,variables:{developerUuid:a}}]});case 4:n();case 5:case"end":return e.stop()}}),e)})))},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}))}function Fe(){return v.a.createElement("div",null,v.a.createElement("h1",null,"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"))}function Ve(){var e=Object(O.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n"]);return Ve=function(){return e},e}var De=T.a.div(Ve()),ze=v.a.forwardRef((function(e,n){return v.a.createElement($.a,Object.assign({direction:"left",ref:n},e))})),Je=function(e){var n=e.open,t=e.handleClose,a=e.uuid,r=Object(o.b)(w.b,{variables:{uuid:a},fetchPolicy:"cache-and-network",skip:!a}),i=r.data,c=r.error,l=r.loading;return c||l?null:v.a.createElement(I.a,{fullScreen:!0,open:n,onClose:t,TransitionComponent:ze},v.a.createElement(De,null,v.a.createElement(We,{onClose:t,contact:null===i||void 0===i?void 0:i.getContact}),v.a.createElement(Fe,null)))};t.d(n,"Contacts",(function(){return Qe}));var Qe=Object(E.b)(null,(function(e){return{applyParams:function(n){return e(Object(P.a)(n))},applyTitle:function(n){return e(Object(P.b)(n))}}}))((function(e){var n=e.applyParams,t=e.applyTitle,a=Object(g.g)();Object(b.useEffect)((function(){n(a),t("\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b")}),[a]);var d=Object(o.b)(w.a,{fetchPolicy:"cache-and-network",variables:{developerUuid:a.developerUuid}}),E=d.data,O=d.loading,j=d.error,h=Object(o.a)(S,{refetchQueries:[{query:w.a,variables:{developerUuid:a.developerUuid}}]}),C=Object(c.a)(h,1)[0],y=v.a.useState(!1),x=Object(c.a)(y,2),k=x[0],P=x[1],$=v.a.useState(),I=Object(c.a)($,2),T=I[0],B=I[1];return O||j?null:v.a.createElement(s.a,{maxWidth:"lg"},v.a.createElement(l.a,{variant:"h4",component:"h4",gutterBottom:!0},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),v.a.createElement(f.a,{columns:[{title:"",width:50,field:"name",render:function(e){return v.a.createElement(U.a,null,(function(n){return v.a.createElement(u.a,{color:"secondary",component:"span",onClick:function(){n((function(){return Object(i.a)(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C({variables:{uuid:e.id}});case 2:case"end":return n.stop()}}),n)})))}))}},v.a.createElement(m.a,null))}))}},{title:"\u0418\u043c\u044f",field:"name"},{title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",field:"phones",render:function(e){return e.phones.map((function(n,t){return v.a.createElement("div",{key:"".concat(e.id).concat(t)},n)}))}},{title:"\u041f\u043e\u0447\u0442\u0430",field:"email"},{title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",field:"position"}],localization:{header:{actions:""}},actions:[{icon:"edit",tooltip:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClick:function(e,n){B(n.id),P(!0)}},{icon:"add",tooltip:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",isFreeAction:!0,onClick:function(){B(null),P(!0)}}],data:E.getAllContacts,title:"",components:{Toolbar:function(e){return v.a.createElement(p.MTableToolbar,e)}}}),v.a.createElement(Je,{open:k,uuid:T,handleClose:function(){B(null),P(!1)}}))}));n.default=Qe},391:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(351),r=t(877),i=t(790),c=t(0);function o(e){var n=e.children,t=e.value,o=e.index,l=Object(a.a)(e,["children","value","index"]);return c.createElement(r.a,Object.assign({component:"div",role:"tabpanel",hidden:t!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o)},l),c.createElement(i.a,{p:3},n))}},394:function(e,n,t){"use strict";t.d(n,"a",(function(){return m}));var a=t(112),r=t(232),i=t(999),c=t(1003),o=t(1002),l=t(866),u=t(903),s=t(0),d=t.n(s);function m(e){var n=d.a.useState(!1),t=Object(a.a)(n,2),r=t[0],i=t[1],c=d.a.useState(),o=Object(a.a)(c,2),l=o[0],u=o[1],m=function(){i(!1)};return d.a.createElement(s.Fragment,null,e.children((function(e){i(!0),u(e)})),d.a.createElement(p,{open:r,title:e.title,text:e.text,cancel:m,accept:function(){l(),m()}}))}function p(e){var n=e.open,t=e.cancel,a=e.accept,s=e.text,m=e.title,p=m||"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",f=s||"\u0414\u0430\u043d\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430";return d.a.createElement(i.a,{open:n,onClose:t,"aria-labelledby":"responsive-dialog-title"},d.a.createElement(u.a,{id:"responsive-dialog-title"},p),d.a.createElement(o.a,null,d.a.createElement(l.a,null,f)),d.a.createElement(c.a,null,d.a.createElement(r.a,{autoFocus:!0,onClick:function(e){e.preventDefault(),e.stopPropagation(),t()},color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),d.a.createElement(r.a,{onClick:function(e){e.preventDefault(),e.stopPropagation(),a()},color:"primary",autoFocus:!0},"\u0414\u0430")))}},850:function(e,n,t){"use strict";t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return s}));var a=t(33),r=t(60);function i(){var e=Object(a.a)(["\n    query getContactsDropdowns {\n        clientStatuses {\n            key\n            displayName\n        }\n    }\n"]);return i=function(){return e},e}function c(){var e=Object(a.a)(["\n    query getContact($uuid: String!) {\n        getContact(uuid: $uuid) {\n            id\n            name\n            email\n            phones\n            position\n            clientStatus\n            responsible {\n                id\n                name\n                role {\n                    key\n                    displayName\n                }\n            }\n        }\n    }\n"]);return c=function(){return e},e}function o(){var e=Object(a.a)(["\n    query getAllContacts($developerUuid: String!) {\n        getAllContacts(developerUuid: $developerUuid) {\n            id\n            name\n            email\n            phones\n            position\n            clientStatus\n        }\n    }\n"]);return o=function(){return e},e}var l=Object(r.a)(o()),u=Object(r.a)(c()),s=Object(r.a)(i())},959:function(e,n,t){"use strict";t.d(n,"b",(function(){return p})),t.d(n,"c",(function(){return f})),t.d(n,"a",(function(){return b}));var a=t(33),r=t(998),i=t(837),c=t(199),o=t(838),l=t(0),u=t.n(l),s=t(53);function d(){var e=Object(a.a)(["\n    display: flex;\n    padding: 8px !important;\n    align-items: center;\n    margin-left: 8px;\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.08);\n        cursor: pointer;\n    }\n"]);return d=function(){return e},e}var m=Object(s.a)(c.a)(d());function p(e){return e.data.displayName}function f(e){var n=e.innerProps,t=e.data,a=e.innerRef;return u.a.createElement(m,Object.assign({ref:a},n,{onClick:function(){e.selectOption(t)}}),u.a.createElement(r.a,{alignItems:"flex-start"},u.a.createElement(o.a,{primary:null===t||void 0===t?void 0:t.displayName})),u.a.createElement(i.a,{variant:"inset",component:"li"}))}function b(e){var n=e.innerProps,t=e.data,a=e.innerRef;return u.a.createElement(m,Object.assign({ref:a},n,{onClick:function(){e.selectOption(t)}}),u.a.createElement(r.a,{alignItems:"flex-start"},u.a.createElement(o.a,{primary:null===t||void 0===t?void 0:t.displayName})),u.a.createElement(i.a,{variant:"inset",component:"li"}))}}}]);
//# sourceMappingURL=20.1b164c93.chunk.js.map