(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[15],{1103:function(e,t,a){"use strict";a.r(t);var n=a(112),r=a(351),l=a(33),c=a(102),i=a(790),o=a(997),u=a(1009),m=a(1091),d=a(199),s=a(998),p=a(838),f=a(171),E=a(414),v=a.n(E),b=a(1099),g=a(1107),h=a(877),O=a(0),j=a.n(O),y=a(117),x=a(42),C=a(546),k=a(353),w=a(962),S=a(321),D=a(311),U=a(1006),I=a(393),R=a.n(I),H=a(53),M=a(352),F=a(105),A=a.n(F),L=a(114),T=a(868),P=a(869),_=a(878),N=a(104),V=a(61),W=a(548),G=a(394),q=a(494);function z(e){var t=e.house,a=Object(x.g)(),r=a.apartmentComplexUuid,l=a.developerUuid,i=Object(c.a)(W.b,{refetchQueries:[{query:M.f,variables:{apartmentComplexId:r}}]}),o=Object(n.a)(i,1)[0],u=t.images.CHESS_GRID?t.images.CHESS_GRID.downloadUrl:V.d;return j.a.createElement(S.c,null,j.a.createElement(q.a,{title:t.name},j.a.createElement(S.f,{to:"/developers/".concat(l,"/apartmentComplex/").concat(r,"/houseEdit/").concat(t.id)},j.a.createElement(_.a,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),j.a.createElement(G.a,null,(function(e){return j.a.createElement(_.a,{onClick:function(){e((function(){return Object(L.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{uuid:t.id}});case 2:case"end":return e.stop()}}),e)})))}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")}))),j.a.createElement(T.a,null,j.a.createElement(N.b,{to:"/developers/".concat(l,"/apartmentComplex/").concat(r,"/house/").concat(t.id,"/info")},j.a.createElement(S.d,{image:u,title:t.name}),j.a.createElement(P.a,null,j.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"p"})))))}function B(){var e=Object(l.a)(["\n    margin-right: 8px;\n"]);return B=function(){return e},e}function Q(){var e=Object(l.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 16px;\n    text-align: center;\n    min-height: 320px;\n    flex-direction: column;\n"]);return Q=function(){return e},e}var J=H.a.div(Q()),Y=Object(H.a)(R.a)(B());function $(){var e=Object(x.g)(),t=e.apartmentComplexUuid,a=e.developerUuid;return O.createElement(S.b,null,O.createElement(S.f,{to:"/developers/".concat(a,"/apartmentComplex/").concat(t,"/create/house")},O.createElement(S.e,{color:"secondary","aria-label":"add"},O.createElement(R.a,null))))}function K(){var e=Object(x.g)(),t=e.apartmentComplexUuid,a=e.developerUuid;return O.createElement(J,null,O.createElement(h.a,{variant:"h4",gutterBottom:!0},"\u0423 \u044d\u0442\u043e\u0433\u043e \u0436\u0438\u043b\u0438\u0449\u043d\u043e\u0433\u043e \u043a\u043e\u043c\u043b\u043f\u0435\u043a\u0441\u0430 \u0435\u0449\u0435 \u043d\u0435\u0442 \u0434\u043e\u043c\u043e\u0432. \u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c?"),O.createElement("div",null,O.createElement(S.f,{to:"/developers/".concat(a,"/apartmentComplex/").concat(t,"/create/house")},O.createElement(U.a,{variant:"extended",size:"medium",color:"primary","aria-label":"add"},O.createElement(Y,null),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))))}function X(e){var t=e.houses;return O.createElement(o.a,{container:!0,spacing:2,alignItems:"center"},O.createElement(o.a,{item:!0,xs:12,md:4},O.createElement($,null)),t.map((function(e){return O.createElement(o.a,{item:!0,xs:12,md:4,key:e.id},O.createElement(z,{house:e}))})))}function Z(){var e=Object(x.g)().apartmentComplexUuid,t=Object(c.b)(M.f,{variables:{apartmentComplexId:e},fetchPolicy:"cache-and-network"}),a=t.loading,n=t.error,r=t.data;if(a)return O.createElement("p",null,"Loading...");if(n||!r)return O.createElement("p",null,"Error :(");var l=r&&r.getHouses;return l&&0!==l.length?O.createElement(X,{houses:l}):O.createElement(K,null)}var ee=a(145),te=a(154),ae=a(1101),ne=a(763),re=a(767),le=a(766),ce=a(765);function ie(e){var t=function(e){return[{key:"type",label:"\u0422\u0438\u043f \u043e\u0431\u044a\u0435\u043a\u0442\u0430",value:e.type.displayName},{key:"name",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:e.name},{key:"city",label:"\u0413\u043e\u0440\u043e\u0434",value:e.city.displayName},{key:"district",label:"\u0420\u0430\u0439\u043e\u043d",value:e.district.displayName},{key:"class",label:"\u041a\u043b\u0430\u0441\u0441",value:e.class.displayName},{key:"levels",label:"\u042d\u0442\u0430\u0436\u043d\u043e\u0441\u0442\u044c",value:e.levels},{key:"sections",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0435\u043a\u0446\u0438\u0439",value:e.sections},{key:"address",label:"\u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441",value:e.address},{key:"price",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043c2",value:e.price},{key:"beginDate",label:"\u041d\u0430\u0447\u0430\u043b\u043e \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:Object(te.a)(Object(ae.a)(e.beginDate),"MM yyyy",{locale:ee.a})},{key:"endDate",label:"\u041a\u043e\u043d\u0435\u0446 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:Object(te.a)(Object(ae.a)(e.endDate),"MM yyyy",{locale:ee.a})}]}(e.apartmentComplex);return O.createElement(ne.a,{"aria-label":"simple table"},O.createElement(re.a,null,t.map((function(e){return O.createElement(ce.a,{key:e.key},O.createElement(le.a,{component:"th",scope:"row"},O.createElement(h.a,{variant:"body2",component:"p"},e.label)),O.createElement(le.a,{align:"right"},O.createElement(h.a,{variant:"body2",component:"p"},e.value)))}))))}var oe=a(232),ue=a(851),me=a(545),de=a(55),se=a(764),pe=a(989),fe=a.n(pe),Ee=a(550),ve=a.n(Ee),be=a(828),ge=a(829),he=a(1114),Oe=a(837),je=a(1098);function ye(){var e=Object(l.a)(["\n    display: flex;\n    padding: 8px !important;\n    align-items: center;\n    margin-left: 8px;\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.08);\n        cursor: pointer;\n    }\n"]);return ye=function(){return e},e}var xe=Object(H.a)(d.a)(ye()),Ce=Object(be.a)((function(e){return Object(ge.a)({root:{width:"100%",backgroundColor:e.palette.background.paper},inline:{display:"inline"}})}));function ke(e){var t=Ce(),a=e.innerProps,n=e.data,r=e.innerRef,l=n.images.CHESS_GRID?n.images.CHESS_GRID.downloadUrl:V.f;return O.createElement(xe,Object.assign({className:t.root,ref:r},a,{onClick:function(){e.selectOption(n)}}),O.createElement(je.a,null,O.createElement(he.a,{alt:n.name,src:l})),O.createElement(s.a,{alignItems:"flex-start"},O.createElement(p.a,{primary:n.name})),O.createElement(Oe.a,{variant:"inset",component:"li"}))}function we(e){return e.data.name}function Se(e){var t=Object(O.useState)(),a=Object(n.a)(t,2),r=a[0],l=a[1];return O.createElement(ve.a,{id:"place",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u043c",options:e.houses,value:r,onChange:function(t){l(t),e.onSelect(t)},isClearable:!0,components:{Option:ke,SingleValue:we}})}var De=a(855);function Ue(){var e=Object(l.a)(["\n    width: 50%;\n"]);return Ue=function(){return e},e}function Ie(){var e=Object(l.a)(["\n    display: flex;\n    padding: 16px;\n    align-items: center;\n    justify-content: flex-end;\n"]);return Ie=function(){return e},e}var Re=H.a.div(Ie()),He=Object(H.a)(le.a)(Ue());function Me(e){return O.createElement(ce.a,null,O.createElement(le.a,{component:"th",scope:"row"},e.houseToMatch.house),O.createElement(He,{align:"right"},O.createElement(Se,{houses:e.houses,onSelect:e.onCombine})))}function Fe(e){return Object.keys(e).map((function(t){var a=e[t],n=a.selectedHouse,r=a.flats;return{houseId:n.id,flats:r.map((function(e){return fe()(["__typename"],e)}))}}))}function Ae(e){var t=Object(O.useState)({}),a=Object(n.a)(t,2),r=a[0],l=a[1],i=Object(x.g)(),o=i.apartmentComplexUuid,u=i.developerUuid,m=Object(c.b)(M.f,{variables:{apartmentComplexId:e.apartmentComplexUuid}}),d=m.loading,s=m.error,p=m.data,E=Object(c.a)(me.a),v=Object(n.a)(E,2),b=v[0],g=v[1],h=g.loading,j=g.data;if(s||d||!p)return null;if(j)return O.createElement(x.a,{to:"/developers/".concat(u,"/apartmentComplex/").concat(o,"/overview/houses")});var y=p.getHouses;return O.createElement(f.a,null,O.createElement(ne.a,{"aria-label":"simple table"},O.createElement(se.a,null,O.createElement(ce.a,null,O.createElement(le.a,null,"\u0414\u043e\u043c\u0430 \u0432 \u0444\u0430\u0439\u043b\u0435"),O.createElement(le.a,{align:"right"},"\u0414\u043e\u043c\u0430 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435"))),O.createElement(re.a,null,e.data.map((function(e){return O.createElement(Me,{key:e.house,houseToMatch:e,houses:y,onCombine:function(t){var a=Object(de.a)({},r);null===t?delete a[e.house]:a[e.house]={selectedHouse:t,flats:e.flats},l(a)}})})))),O.createElement(Re,null,O.createElement(oe.a,{variant:"contained",onClick:e.onCancel},"\u041e\u0442\u043c\u0435\u043d\u0430"),O.createElement(oe.a,{disabled:h,variant:"contained",color:"primary",onClick:Object(L.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({variables:{data:Fe(r)}});case 2:case"end":return e.stop()}}),e)})))},h&&O.createElement(De.a,{size:30,thickness:5}),"\u0418\u043c\u043f\u043e\u0440\u0442")))}function Le(){var e=Object(l.a)(["\n    text-decoration: none;\n    button {\n        margin-bottom: 8px;\n    }\n"]);return Le=function(){return e},e}var Te=H.a.a(Le());function Pe(e){var t=Object(ue.a)({accept:".csv",onDrop:function(t){e.onDrop(t[0])}}),a=t.getRootProps,n=t.getInputProps,r=t.isDragActive,l=t.isDragAccept,c=t.isDragReject;return j.a.createElement("div",{className:"container"},j.a.createElement(Te,{href:"http://d2wn3f22rkbhe4.cloudfront.net/Template.csv"},j.a.createElement(oe.a,{variant:"outlined",color:"primary"},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440")),j.a.createElement(S.a,a({isDragActive:r,isDragAccept:l,isDragReject:c}),j.a.createElement("input",n()),j.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")))}function _e(){var e=Object(x.g)().apartmentComplexUuid,t=Object(O.useState)(!1),a=Object(n.a)(t,2),r=a[0],l=a[1],i=Object(c.a)(me.g),o=Object(n.a)(i,2),u=o[0],m=o[1].data,d=function(){var t=Object(L.a)(A.a.mark((function t(a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u({variables:{file:a,uuid:e}});case 2:l(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r?j.a.createElement(Ae,{data:m.uploadApartmentComplexFile,apartmentComplexUuid:e||"",onCancel:function(){l(!1)}}):j.a.createElement(Pe,{onDrop:d})}var Ne=a(964);function Ve(){var e=Object(l.a)(["\n    width: 90%;\n    margin: 8px;\n    align-self: center;\n    border: 1px solid #ccc;\n    cursor: pointer;\n"]);return Ve=function(){return e},e}var We=H.a.img(Ve());function Ge(e){var t=O.useState(!1),a=Object(n.a)(t,2),r=a[0],l=a[1],i=e.images[e.mode.value]||{uuid:"",downloadUrl:V.d},o=Object(c.a)(me.f,{refetchQueries:[{query:C.c,variables:{uuid:e.uuid}}]});return O.createElement(O.Fragment,null,O.createElement(We,{src:i.downloadUrl,alt:"\u0416\u041a",onClick:function(){l(!0)}}),O.createElement(Ne.a,{mutation:o,setOpen:l,open:r,params:{uuid:e.uuid,mode:e.mode.value}}))}function qe(e){var t=e.images,a=Object(x.g)().apartmentComplexUuid;return O.createElement(Ge,{images:t,uuid:a,mode:{title:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",value:D.a.CHESS_GRID}})}var ze=a(773),Be=a(874);function Qe(){var e=Object(l.a)(["\n    &.MuiFab-root {\n        width: 140px;\n        height: 140px;\n        .MuiSvgIcon-root {\n            width: 3em;\n            height: 3em;\n        }\n    }\n"]);return Qe=function(){return e},e}function Je(){var e=Object(l.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return Je=function(){return e},e}var Ye=H.a.div(Je()),$e=Object(H.a)(U.a)(Qe());function Ke(e){var t=e.uuid,a=e.mode,r=e.mutation,l=O.useState(!1),c=Object(n.a)(l,2),i=c[0],o=c[1];return O.createElement(Ye,null,O.createElement($e,{color:"secondary","aria-label":"add",onClick:function(){o(!0)}},O.createElement(R.a,null)),O.createElement(Be.a,{mutation:r,setOpen:o,open:i,params:{uuid:t,mode:a}}))}function Xe(e){var t=Object(c.a)(me.f,{refetchQueries:[{query:C.c,variables:{uuid:e.uuid}}]}),a=Object(c.a)(me.d,{refetchQueries:[{query:C.c,variables:{uuid:e.uuid}}]});return O.createElement(O.Fragment,null,O.createElement(o.a,{container:!0,spacing:3,alignItems:"center"},O.createElement(o.a,{item:!0,xs:12,md:3},O.createElement(Ke,{mutation:t,uuid:e.uuid,mode:e.mode})),e.images.map((function(n){return O.createElement(o.a,{item:!0,xs:12,md:3,key:n.uuid},O.createElement(ze.a,{deleteMutation:a,uuid:e.uuid,imageUuid:n.uuid,mode:e.mode,url:n.downloadUrl,title:n.name},(function(e,a,r){return O.createElement(Be.a,{mutation:t,setOpen:e,open:a,params:r,downloadLink:n.downloadUrl})})))}))))}var Ze=a(875);function et(){var e=Object(l.a)(["\n    &.MuiFab-root {\n        width: 140px;\n        height: 140px;\n        .MuiSvgIcon-root {\n            width: 3em;\n            height: 3em;\n        }\n    }\n"]);return et=function(){return e},e}function tt(){var e=Object(l.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return tt=function(){return e},e}var at=H.a.div(tt()),nt=Object(H.a)(U.a)(et());function rt(e){var t=e.uuid,a=e.mode,r=e.mutation,l=O.useState(!1),c=Object(n.a)(l,2),i=c[0],o=c[1];return O.createElement(at,null,O.createElement(nt,{color:"secondary","aria-label":"add",onClick:function(){o(!0)}},O.createElement(R.a,null)),O.createElement(Ze.a,{mutation:r,setOpen:o,open:i,params:{uuid:t,mode:a}}))}function lt(e){var t=Object(c.a)(me.f,{refetchQueries:[{query:C.c,variables:{uuid:e.uuid}}]}),a=Object(c.a)(me.d,{refetchQueries:[{query:C.c,variables:{uuid:e.uuid}}]});return O.createElement(o.a,{container:!0,spacing:2,alignItems:"center"},O.createElement(o.a,{item:!0,xs:12,md:3},O.createElement(rt,{mutation:t,uuid:e.uuid,mode:e.mode})),e.images.map((function(n){return O.createElement(o.a,{item:!0,xs:12,md:3,key:n.uuid},O.createElement(ze.a,{deleteMutation:a,uuid:e.uuid,imageUuid:n.uuid,mode:e.mode,url:n.previewImageUrl,title:n.name},(function(e,a,r){return O.createElement(Ze.a,{mutation:t,setOpen:e,open:a,params:r,downloadLink:n.downloadUrl})})))})))}var ct=a(906),it=a(60);function ot(){var e=Object(l.a)(["\n    query getHistory($apartmentComplexId: String!) {\n        getHistory(apartmentComplexId: $apartmentComplexId) {\n            id\n            name\n            timestamp\n            downloadUrl\n        }\n    }\n"]);return ot=function(){return e},e}var ut=Object(it.a)(ot());function mt(){var e=Object(x.g)().apartmentComplexUuid,t=Object(c.b)(ut,{variables:{apartmentComplexId:e},fetchPolicy:"cache-and-network"}),a=t.data,n=t.loading;return t.error||n?null:a.getHistory?j.a.createElement(ct.a,{component:f.a},j.a.createElement(ne.a,{"aria-label":"simple table"},j.a.createElement(se.a,null,j.a.createElement(ce.a,null,j.a.createElement(le.a,null,"\u0414\u0430\u0442\u0430"),j.a.createElement(le.a,null,"\u0424\u0430\u0439\u043b"),j.a.createElement(le.a,null,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"))),j.a.createElement(re.a,null,a.getHistory.map((function(e){return j.a.createElement(ce.a,{key:e.id},j.a.createElement(le.a,{component:"th",scope:"row"},Object(te.a)(Object(ae.a)(e.timestamp),"dd.MM.yyyy HH:mm")),j.a.createElement(le.a,null,e.name),j.a.createElement(le.a,null,j.a.createElement(oe.a,{variant:"outlined",color:"primary",target:"_blank",href:e.downloadUrl},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c")))}))))):null}function dt(){var e=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n"]);return dt=function(){return e},e}a.d(t,"ApartmentComplexInfo",(function(){return Et}));var st=Object(H.a)(f.a)(dt()),pt=v()((function(e){return{root:{backgroundColor:e.palette.background.paper,flexGrow:1,width:"100%"}}}));function ft(e){var t=e.children,a=e.value,n=e.index,l=Object(r.a)(e,["children","value","index"]);return O.createElement(h.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),O.createElement(i.a,{p:3},t))}var Et=Object(y.b)(null,(function(e){return{applyParams:function(t){return e(Object(k.a)(t))},applyTitle:function(t){return e(Object(k.b)(t))}}}))((function(e){var t=e.applyParams,a=e.applyTitle,r=Object(x.g)();Object(O.useEffect)((function(){t(r),a("\u0416\u0438\u043b\u0438\u0449\u043d\u044b\u0439 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441")}),[r]);var l=pt(),i=Object(O.useState)(0),f=Object(n.a)(i,2),E=f[0],v=f[1],h=Object(x.h)(),j=h.path,y=h.url,k=Object(x.g)(),U=k.apartmentComplexUuid,I=k.developerUuid;if(!U)return O.createElement(x.a,{to:"/"});var R=Object(c.b)(C.c,{fetchPolicy:"cache-and-network",variables:{uuid:U}}),H=R.loading,M=R.error,F=R.data;if(H)return O.createElement("p",null,"Loading...");if(M||!F)return O.createElement("p",null,"Error :(");if(!F.getApartmentComplex)return O.createElement(x.a,{to:"/"});var A=F.getApartmentComplex,L=A.images,T=A.name;return O.createElement(O.Fragment,null,O.createElement(m.a,{maxWidth:"lg"},O.createElement(w.a,{title:T,editUrl:"/developers/".concat(I,"/apartmentComplex/").concat(U,"/edit")}),O.createElement(o.a,{container:!0,spacing:2},O.createElement(o.a,{item:!0,xs:3},O.createElement(st,null,O.createElement(qe,{images:L}),O.createElement(d.a,{component:"nav","aria-label":"main mailbox folders"},O.createElement(S.g,{activeClassName:"Mui-selected",to:"".concat(y,"/info")},O.createElement(s.a,{button:!0},O.createElement(p.a,{primary:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}))),O.createElement(S.g,{activeClassName:"Mui-selected",to:"".concat(y,"/houses")},O.createElement(s.a,{button:!0},O.createElement(p.a,{primary:"\u0414\u043e\u043c\u0430"}))),O.createElement(S.g,{activeClassName:"Mui-selected",to:"".concat(y,"/import")},O.createElement(s.a,{button:!0},O.createElement(p.a,{primary:"\u0418\u043c\u043f\u043e\u0440\u0442 \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0439"}))),O.createElement(S.g,{activeClassName:"Mui-selected",to:"".concat(y,"/history")},O.createElement(s.a,{button:!0},O.createElement(p.a,{primary:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439"})))))),O.createElement(o.a,{item:!0,xs:9},O.createElement("div",{className:l.root},O.createElement(x.d,null,O.createElement(x.b,{exact:!0,path:"".concat(j,"/info")},O.createElement(u.a,{position:"static",color:"default"},O.createElement(g.a,{value:E,onChange:function(e,t){v(t)},"aria-label":"simple tabs example"},O.createElement(b.a,{label:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),O.createElement(b.a,{label:"360"}),O.createElement(b.a,{label:"\u0424\u043e\u0442\u043e"}))),O.createElement(ft,{value:E,index:0},O.createElement(ie,{apartmentComplex:F.getApartmentComplex})),O.createElement(ft,{value:E,index:1},O.createElement(lt,{uuid:U,images:L.VR||[],mode:D.a.VR})),O.createElement(ft,{value:E,index:2},O.createElement(Xe,{uuid:U,images:L.PHOTO||[],mode:D.a.PHOTO}))),O.createElement(x.b,{path:"".concat(j,"/houses")},O.createElement(Z,null)),O.createElement(x.b,{path:"".concat(j,"/import")},O.createElement(_e,null)),O.createElement(x.b,{path:"".concat(j,"/history")},O.createElement(mt,null))))))))}));t.default=Et},311:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.CHESS_GRID="CHESS_GRID",e.SITE="SITE",e.MOBILE="MOBILE",e.PHOTO="PHOTO",e.VR="VR",e.HALF_VR="HALF_VR"}(n||(n={}))},394:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(112),r=a(232),l=a(999),c=a(1003),i=a(1002),o=a(866),u=a(903),m=a(0),d=a.n(m);function s(e){var t=d.a.useState(!1),a=Object(n.a)(t,2),r=a[0],l=a[1],c=d.a.useState(),i=Object(n.a)(c,2),o=i[0],u=i[1],s=function(){l(!1)};return d.a.createElement(m.Fragment,null,e.children((function(e){l(!0),u(e)})),d.a.createElement(p,{open:r,title:e.title,text:e.text,cancel:s,accept:function(){o(),s()}}))}function p(e){var t=e.open,a=e.cancel,n=e.accept,m=e.text,s=e.title,p=s||"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",f=m||"\u0414\u0430\u043d\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430";return d.a.createElement(l.a,{open:t,onClose:a,"aria-labelledby":"responsive-dialog-title"},d.a.createElement(u.a,{id:"responsive-dialog-title"},p),d.a.createElement(i.a,null,d.a.createElement(o.a,null,f)),d.a.createElement(c.a,null,d.a.createElement(r.a,{autoFocus:!0,onClick:function(e){e.preventDefault(),e.stopPropagation(),a()},color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),d.a.createElement(r.a,{onClick:function(e){e.preventDefault(),e.stopPropagation(),n()},color:"primary",autoFocus:!0},"\u0414\u0430")))}},494:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(112),r=a(0),l=a(830),c=a(768),i=a.n(c),o=a(129),u=a(867);function m(e){var t=r.useState(null),a=Object(n.a)(t,2),c=a[0],m=a[1],d=Boolean(c);return r.createElement(u.a,{title:e.title,action:r.createElement(r.Fragment,null,r.createElement(l.a,{"aria-label":"settings",onClick:function(e){m(e.currentTarget)}},r.createElement(i.a,null)),r.createElement(o.a,{id:"long-menu",anchorEl:c,keepMounted:!0,open:d,onClose:function(){m(null)}},e.children))})}},534:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),l=a(851),c=a(321);function i(e){var t=Object(l.a)({accept:"image/*",onDrop:function(t){e.onDrop(t[0])}}),a=t.getRootProps,n=t.getInputProps,i=t.isDragActive,o=t.isDragAccept,u=t.isDragReject;return r.a.createElement("div",{className:"container"},r.a.createElement(c.a,a({isDragActive:i,isDragAccept:o,isDragReject:u}),r.a.createElement("input",n()),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")))}},773:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(105),r=a.n(n),l=a(114),c=a(112),i=a(868),o=a(869),u=a(878),m=a(877),d=a(0),s=a(494),p=a(321);function f(e){var t=d.useState(!1),a=Object(c.a)(t,2),n=a[0],f=a[1],E=Object(c.a)(e.deleteMutation,1)[0],v=function(){var t=Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E({variables:{mode:e.mode,imageId:e.imageUuid,uuid:e.uuid}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return d.createElement(p.c,null,d.createElement(s.a,{title:e.title},d.createElement(u.a,{onClick:v},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),d.createElement(i.a,{onClick:function(){f(!0)}},d.createElement(p.d,{image:e.url}),d.createElement(o.a,null,d.createElement(m.a,{variant:"body2",color:"textSecondary",component:"p"}))),e.children(f,n,{uuid:e.uuid,mode:e.mode}))}},791:function(e,t){},793:function(e,t){},874:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n=a(105),r=a.n(n),l=a(114),c=a(112),i=a(33),o=a(232),u=a(855),m=a(999),d=a(1003),s=a(1002),p=a(903),f=a(234),E=a(0),v=a.n(E),b=a(53),g=a(534);function h(){var e=Object(i.a)(["\n    max-width: 100%;\n"]);return h=function(){return e},e}function O(){var e=Object(i.a)(["\n    max-width: 720px;\n    align-self: center;\n"]);return O=function(){return e},e}function j(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n"]);return j=function(){return e},e}var y=b.a.div(j()),x=b.a.div(O()),C=b.a.img(h());function k(e){var t=e.setOpen,a=e.open,n=e.params,i=e.downloadLink,b=e.mutation,h=Object(E.useState)(),O=Object(c.a)(h,2),j=O[0],k=O[1],w=Object(E.useState)(),S=Object(c.a)(w,2),D=S[0],U=S[1],I=Object(E.useState)(i),R=Object(c.a)(I,2),H=R[0],M=R[1];Object(E.useEffect)((function(){a&&M(i)}),[a]);var F=n.uuid,A=n.mode,L=Object(c.a)(b,2),T=L[0],P=L[1].loading,_=function(){setTimeout((function(){k(void 0),M(void 0)}),200),t(!1)},N=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({variables:{file:j,uuid:F,mode:A,name:D}});case 2:_();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return v.a.createElement(m.a,{open:a,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"md"},v.a.createElement(p.a,{id:"form-dialog-title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),v.a.createElement(s.a,null,!H&&v.a.createElement(g.a,{onDrop:function(e){k(e);var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(e){M(t.result)}}}),H&&v.a.createElement(E.Fragment,null,v.a.createElement(y,null,v.a.createElement(x,null,v.a.createElement(C,{src:H})),v.a.createElement("div",null,v.a.createElement(f.a,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",margin:"normal",value:D,onChange:function(e){U(e.target.value)},fullWidth:!0,variant:"outlined"}))))),v.a.createElement(d.a,null,v.a.createElement(o.a,{onClick:_,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),v.a.createElement(o.a,{variant:"contained",disabled:!j||P||!D,onClick:N,color:"primary"},P&&v.a.createElement(u.a,{size:30,thickness:5}),"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}},875:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var n=a(105),r=a.n(n),l=a(114),c=a(112),i=a(33),o=a(232),u=a(855),m=a(999),d=a(1003),s=a(1002),p=a(903),f=a(234),E=a(795),v=a(0),b=a.n(v),g=a(53),h=a(534),O=a(311);function j(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n"]);return j=function(){return e},e}var y=g.a.div(j()),x={haov:180,minYaw:-90,maxYaw:90};function C(e){var t=e.setOpen,a=e.open,n=e.params,i=e.downloadLink,g=e.mutation,j=Object(v.useState)(),C=Object(c.a)(j,2),k=C[0],w=C[1],S=Object(v.useState)(),D=Object(c.a)(S,2),U=D[0],I=D[1],R=Object(v.useState)(i),H=Object(c.a)(R,2),M=H[0],F=H[1],A=n.uuid,L=n.mode;Object(v.useEffect)((function(){a&&F(i)}),[a]);var T=Object(c.a)(g,2),P=T[0],_=T[1].loading,N=function(){setTimeout((function(){w(void 0),F(void 0),I(void 0)}),200),t(!1)},V=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({variables:{file:k,uuid:A,mode:L,name:U}});case 2:N();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=L===O.a.HALF_VR?x:{};return b.a.createElement(m.a,{open:a,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"md"},b.a.createElement(p.a,{id:"form-dialog-title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),b.a.createElement(s.a,null,!M&&b.a.createElement(h.a,{onDrop:function(e){w(e);var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(e){F(t.result)}}}),M&&b.a.createElement(v.Fragment,null,b.a.createElement(y,null,b.a.createElement("div",null,b.a.createElement(E.a,Object.assign({width:"100%",height:"500px",image:M,pitch:10,yaw:180,hfov:110,autoLoad:!0},W))),b.a.createElement("div",null,b.a.createElement(f.a,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",margin:"normal",value:U,onChange:function(e){I(e.target.value)},fullWidth:!0,variant:"outlined"}))))),b.a.createElement(d.a,null,b.a.createElement(o.a,{onClick:N,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),b.a.createElement(o.a,{variant:"contained",disabled:!k||_||!U,onClick:V,color:"primary"},_&&b.a.createElement(u.a,{size:30,thickness:5}),"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}},962:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(33),r=a(877),l=a(858),c=a.n(l),i=a(0),o=a.n(i),u=a(53),m=a(321);function d(){var e=Object(n.a)(["\n    display: inline-flex;\n    align-items: center;\n\n    "," {\n        display: inline-flex;\n        margin-left: 4px;\n    }\n"]);return d=function(){return e},e}var s=u.a.div(d(),m.f);function p(e){var t=e.editUrl,a=e.title,n=e.children;return o.a.createElement(i.Fragment,null,o.a.createElement(r.a,{variant:"h5",gutterBottom:!0},o.a.createElement(s,null,o.a.createElement("div",null,a),o.a.createElement(m.f,{to:t},o.a.createElement(c.a,{color:"primary"})))),n)}},964:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var n=a(105),r=a.n(n),l=a(114),c=a(112),i=a(33),o=a(232),u=a(855),m=a(999),d=a(1003),s=a(1002),p=a(903),f=a(1115),E=a(877),v=(a(991),a(0)),b=a.n(v),g=a(992),h=a.n(g),O=a(53),j=a(534);function y(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n"]);return y=function(){return e},e}var x=O.a.div(y());function C(e){var t=e.setOpen,a=e.open,n=e.params,i=e.mutation,g=Object(v.useState)(),O=Object(c.a)(g,2),y=O[0],C=O[1],k=n.uuid,w=n.mode,S=Object(c.a)(i,2),D=S[0],U=S[1].loading,I=b.a.createRef(),R=function(){C(void 0),t(!1)},H=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=9;break}return t=I.current.getCroppedCanvas(),e.next=4,fetch(t.toDataURL()).then((function(e){return e.blob()}));case 4:return a=e.sent,r=a,l=null===y||void 0===y?void 0:y.name,n=new File([r],l),e.next=8,D({variables:{file:n,uuid:k,mode:w}});case 8:R();case 9:case"end":return e.stop()}var r,l}),e)})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(m.a,{open:a,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"md"},b.a.createElement(p.a,{id:"form-dialog-title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),b.a.createElement(s.a,null,!y&&b.a.createElement(j.a,{onDrop:function(e){var t=new FileReader;t.onload=function(){C(t.result)},t.readAsDataURL(e)}}),y&&b.a.createElement(v.Fragment,null,b.a.createElement(x,null,b.a.createElement(h.a,{dragMode:"move",src:y,ready:function(){I.current.zoomTo(1)},style:{height:400,width:"100%"},aspectRatio:16/9,preview:".img-preview",ref:I})),b.a.createElement("div",null,b.a.createElement(E.a,{id:"discrete-slider",gutterBottom:!0},"\u0420\u0430\u0437\u043c\u0435\u0440"),b.a.createElement(f.a,{defaultValue:1,onChange:function(e,t){I.current.zoomTo(t)},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:.1,marks:!0,min:.1,max:3})),b.a.createElement("div",null,b.a.createElement(E.a,{id:"discrete-slider",gutterBottom:!0},"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c"),b.a.createElement(f.a,{defaultValue:1,onChange:function(e,t){I.current.rotateTo(t)},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:360})))),b.a.createElement(d.a,null,b.a.createElement(o.a,{onClick:R,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),b.a.createElement(o.a,{variant:"contained",disabled:!y,onClick:H,color:"primary"},U&&b.a.createElement(u.a,{size:30,thickness:5}),"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}}}]);
//# sourceMappingURL=15.256a58cf.chunk.js.map